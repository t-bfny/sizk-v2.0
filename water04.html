<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Water Vibes</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
    <video autoplay muted loop playsinline id="bgVideo">
        <source src="on_the_cliff.webm" type="video/webm">
        Your browser does not support the video tag.
      </video>
    <div class="water"></div>
    <canvas id="spectrumCanvas"></canvas>
  <div class="content">
    <button id="playWater1">水のしずく</button>
    <button id="playWater2">風鈴の音</button>
    <button id="toggleBgm">BGM OFF</button>

    <div class="volume-control">
      🔉 BGM音量：
      <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
    </div>
  </div>
  
  <!-- BGM -->
  <audio id="bgm" src="aranami.mp3" loop></audio>

  <!-- 効果音 -->
  <audio id="water1" src="Water_Drop03-1(Low-Reverb).mp3"></audio>
  <audio id="water2" src="windchime.mp3"></audio>
  <script>
    const water1 = document.getElementById("water1");
    const water2 = document.getElementById("water2");
    const bgm = document.getElementById("bgm");

    const playWater1 = document.getElementById("playWater1");
    const playWater2 = document.getElementById("playWater2");
    const toggleBgm = document.getElementById("toggleBgm");
    const volumeSlider = document.getElementById("volumeSlider");

    let bgmEnabled = true;

    // 効果音の再生
    playWater1.addEventListener("click", () => {
      water1.currentTime = 0;
      water1.play();
    });

    playWater2.addEventListener("click", () => {
      water2.currentTime = 0;
      water2.play();
    });

    // BGM ON/OFF 切り替え
    toggleBgm.addEventListener("click", () => {
      if (bgmEnabled) {
        bgm.pause();
        toggleBgm.textContent = "BGM ON";
      } else {
        bgm.play();
        toggleBgm.textContent = "BGM OFF";
      }
      bgmEnabled = !bgmEnabled;
    });

    // ボリューム調整
    volumeSlider.addEventListener("input", () => {
      bgm.volume = volumeSlider.value;
    });

    // モバイルブラウザ対策（最初の操作で再生許可）
    window.addEventListener("click", () => {
      if (!bgmEnabled) return;
      if (bgm.paused) {
        bgm.play().catch(() => {});
      }
    });

    // ページ読み込み時に自動再生
    window.addEventListener("load", () => {
      bgm.volume = volumeSlider.value;
      bgm.play().catch(() => {});
    });

  </script>

　<script src="script.js">　</script>
</body>
</html>
